"use client"

import gsap from "gsap";
import { ScrollTrigger } from "gsap/all";
import Link from "next/link";
import { useEffect, useRef } from "react";

import { navLinks, socialLinks } from "@/constants";

const Footer = () => {
  const footerLinksRef = useRef([]);

  useEffect(() => {
    gsap.registerPlugin(ScrollTrigger);

    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: '#contact',
        start: 'top center',
        end: 'bottom center',
        // markers: true,
        toggleActions: "play reverse play reverse",
      }
    })

    tl.fromTo(".contact-div-title", {
      opacity: 0,
      translateY: 20,
      clipPath: "inset(0% 0% 100% 0%)",
    }, {
      opacity: 1,
      translateY: 0,
      clipPath: "inset(0% 0% 0% 0%)",
      ease: "power4.inOut",
      stagger: 0.1,
    });
    
    tl.fromTo(".contact-text", {
      translateY: 20,
      clipPath: "inset(0% 0% 100% 0%)",
    }, {
      clipPath: "inset(0% 0% 0% 0%)",
      translateY: 0,
      duration: 0.5,
      ease: "sine.inOut",
    });

    tl.fromTo(".footer-link", {
      opacity: 0,
    }, {
      opacity: 1,
      stagger: {
        each: 0.1,
        from: 'start',
        ease: 'sine.inOut'
      }
    });
  }, []);

  const handleMouseEnter = (i) => {
    gsap.to(footerLinksRef.current[i].querySelector('.footer-link_underline'), {
      width: '100%',
      duration: 0.5,
      ease: 'sine.out',
    });
  };

  const handleMouseLeave = (i) => {
    gsap.to(footerLinksRef.current[i].querySelector('.footer-link_underline'), {
      width: '0%',
      duration: 0.5,
      ease: 'sine.in',
    });
  };

  return (
    <footer id="contact" className="flex flex-col w-full justify-center items-center gap-4 py-8 h-screen">
      <div className="w-full h-[90%] flex justify-center items-center">
        <div id="contact-div" className="relative w-full h-[40%] flex flex-col justify-center items-center">
          <Link href="https://www.linkedin.com/in/sguzmanr/" className="cursor-pointer font-montserrat font-bold text-[10vw] leading-[.8] flex flex-row">
            <p className="contact-div-title">C</p>
            <p className="contact-div-title">O</p>
            <p className="contact-div-title">N</p>
            <p className="contact-div-title">T</p>
            <p className="contact-div-title">A</p>
            <p className="contact-div-title">C</p>
            <p className="contact-div-title">T</p>
            <p className="contact-div-title">A</p>
            <p className="contact-div-title">M</p>
            <p className="contact-div-title">E</p>
          </Link>

          <Link href="https://www.linkedin.com/in/sguzmanr/" className="contact-text absolute flex items-center justify-center w-full h-full bg-black py-5">
            <p className="font-birthstone text-white text-center text-wrap text-[10vw] max-sm:text-[13vw]">Y trabajemos Juntos</p>
          </Link>
        </div>
      </div>

      <div className="paddingX w-full h-auto flex flex-col gap-8 max-sm:gap-16">
        <div className="flex flex-row justify-between items-end w-full max-sm:flex-col max-sm:items-center max-sm:gap-5">
          <Link href="/" className="footer-link">
            <svg
              width="80"
              height="100%"
              viewBox="0 0 529.16665 229.38819"
              fill="#747A88"
              className="hover:fill-white transition-colors duration-700">
                <path
                  d="m 376.21135,228.56923 c -1.27448,-1.36433 -1.10579,-2.07583 1.77655,-7.49329 4.30451,-8.09048 5.33278,-9.80262 10.97588,-18.2756 6.98584,-10.48907 12.96863,-19.06624 25.4684,-36.5125 5.52587,-7.7126 13.8866,-19.45512 18.5794,-26.09449 11.16985,-15.80309 22.52394,-31.6313 34.51884,-48.121129 8.98644,-12.353979 9.81311,-13.406979 10.96359,-13.965173 0.68436,-0.332043 1.74715,-0.672639 2.36176,-0.75688 0.9414,-0.129033 1.23978,-0.04789 1.89385,0.515 0.67204,0.57835 0.77389,0.844971 0.75771,1.983503 -0.0103,0.723437 -0.2318,1.873365 -0.49227,2.555396 -0.57843,1.514596 -4.40911,6.791247 -14.99004,20.648363 -10.399,13.61884 -7.85271,10.12525 -36.92886,50.6677 -21.13673,29.47211 -27.12501,38.02903 -37.58747,53.71042 -12.18227,18.25907 -14.89265,21.96041 -16.08095,21.96041 -0.24683,0 -0.79421,-0.36978 -1.21639,-0.82173 z M 225.54395,215.246 c -6.97299,-1.2667 -10.49288,-3.80659 -11.66397,-8.41651 -0.23025,-0.90635 -0.44377,-1.67603 -0.4745,-1.71042 -0.0307,-0.0344 -0.90045,0.17154 -1.93273,0.4576 -3.0508,0.84542 -8.14207,1.7888 -12.3807,2.29408 -5.80178,0.69161 -24.01868,0.69152 -30.42017,-1.6e-4 -17.71921,-1.91455 -33.42416,-6.36166 -48.70998,-13.79301 -26.379544,-12.82469 -45.670145,-30.6866 -49.76097,-46.07561 -0.899974,-3.38555 -1.011617,-8.68439 -0.244659,-11.61204 2.139997,-8.16886 8.342812,-14.27947 18.552658,-18.27689 8.248643,-3.22956 17.973891,-4.51961 28.966071,-3.84236 10.86083,0.66916 16.62717,1.82214 24.20688,4.84014 3.37667,1.34449 7.94025,3.67653 9.11039,4.65553 1.12125,0.93809 0.99143,1.64373 -0.30219,1.64263 -0.95797,-8.2e-4 -15.70436,-1.07579 -24.25582,-1.76818 -7.87408,-0.63755 -23.07249,-0.65056 -26.387999,-0.0226 -6.861342,1.29955 -14.330923,4.9265 -18.172898,8.82408 -0.967667,0.98167 -1.899864,2.29266 -2.513542,3.53491 -0.971262,1.96609 -0.975375,1.98876 -0.960514,5.29468 0.01306,2.90583 0.107758,3.60076 0.758879,5.56909 0.92658,2.80103 2.234177,5.43904 3.803274,7.67291 4.400585,6.26497 12.665612,13.99911 21.56029,20.17542 10.2082,7.08838 24.55,14.29498 36.172,18.17603 16.45476,5.4949 33.58254,7.85355 50.27674,6.92354 8.99623,-0.50116 16.03378,-1.83033 22.00937,-4.15687 1.35227,-0.52649 2.93493,-1.10315 3.51701,-1.28146 1.7414,-0.53345 1.85938,-0.6275 3.59348,-2.86465 2.40671,-3.10486 5.1945,-5.74432 9.56752,-9.05847 l 3.8403,-2.91041 0.69047,-2.24896 c 1.04423,-3.40122 1.31392,-5.74565 1.14137,-9.92188 -0.23715,-5.73951 -1.48607,-12.10373 -3.51625,-17.91803 -2.14712,-6.14921 -4.14684,-9.66205 -17.21215,-30.23613 -2.77234,-4.36562 -5.91227,-9.36625 -6.97763,-11.1125 -1.06536,-1.74625 -3.62746,-5.8539 -5.69356,-9.128123 -10.62167,-16.832575 -15.03166,-26.72762 -17.21613,-38.629165 -0.63643,-3.467493 -0.64192,-10.64144 -0.0106,-13.831062 1.46258,-7.389082 4.82867,-13.297344 11.28429,-19.80653 5.51727,-5.563051 10.51701,-9.079948 18.39219,-12.93736 10.02029,-4.9081299 22.93026,-9.2357495 34.26353,-11.485662 9.51497,-1.88893703 15.56482,-2.37444383 27.25209,-2.18700894 9.79432,0.15707671 11.45944,0.36975527 16.05293,2.05036664 4.35143,1.5920476 6.791,3.020718 9.44501,5.5312132 4.49472,4.2516721 6.51451,9.8752331 6.51451,18.1379201 0,9.843949 -3.10116,17.29687 -12.2709,29.490323 -3.18818,4.239476 -18.80501,20.238214 -28.19313,28.882583 -1.95623,1.801254 -4.80134,4.437951 -6.32247,5.859327 -3.16291,2.955495 -5.62229,4.361182 -7.84783,4.48552 -1.28038,0.07153 -1.32571,0.04949 -1.40972,-0.685663 -0.0477,-0.417766 -0.008,-1.07261 0.0875,-1.455209 0.10941,-0.436633 4.48245,-5.030107 11.74525,-12.3373 16.24645,-16.34576 19.46676,-19.984569 25.91252,-29.279954 8.82473,-12.726068 10.71765,-17.390752 10.26602,-25.298257 -0.32637,-5.714323 -1.46423,-8.933996 -4.1854,-11.842941 -2.10222,-2.247275 -4.24609,-3.298213 -8.89863,-4.3621678 -5.81574,-1.3299554 -8.48745,-1.6553156 -13.54152,-1.6490815 -14.85855,0.018327 -32.50397,3.7076303 -47.09583,9.8467923 -4.14767,1.745031 -10.77037,5.02425 -14.07596,6.969696 -5.85505,3.445877 -12.47624,9.305222 -15.15093,13.407642 -2.66918,4.093949 -4.2066,8.608682 -4.53825,13.326855 -0.53883,7.665492 3.13626,20.588981 8.64395,30.396478 1.70236,3.031385 6.00385,9.933914 12.2464,19.651608 15.72582,24.48014 17.14771,26.8021 20.65772,33.73437 2.99986,5.92472 4.88981,10.62146 7.02684,17.4625 2.00532,6.41936 2.63973,9.80295 2.84011,15.14739 0.0859,2.29196 0.20703,4.16719 0.26911,4.16719 0.0621,0 0.84403,-0.56262 1.73767,-1.25026 5.86008,-4.50922 20.52545,-12.74923 34.03173,-19.12135 9.34435,-4.40857 28.17734,-12.63381 34.83394,-15.2136 1.61129,-0.62446 3.57582,-1.46209 4.36562,-1.8614 3.96247,-2.00336 8.72636,-5.8709 11.20995,-9.10077 2.76613,-3.59729 6.98794,-11.33105 8.72861,-15.98955 0.94074,-2.5177 2.87816,-9.17158 2.71733,-9.33242 -0.12026,-0.120254 -6.71663,4.11333 -12.69162,8.14554 -7.34941,4.95973 -11.19531,6.83515 -18.97931,9.25509 -4.56503,1.4192 -5.8658,1.46415 -8.26011,0.28544 -0.96183,-0.47351 -2.11298,-1.27573 -2.55812,-1.78271 -1.56617,-1.78377 -1.98095,-4.98882 -0.96141,-7.42893 0.55043,-1.31735 3.09665,-5.03705 4.91751,-7.18384 2.00531,-2.364268 8.65931,-7.981211 12.28762,-10.37255 4.77519,-3.147222 10.07797,-5.611557 16.21067,-7.533514 3.64489,-1.14229 5.56062,-1.468304 8.65863,-1.473505 2.7555,-0.0046 4.66232,-0.271682 8.77908,-1.229543 3.60029,-0.83769 4.52122,-0.734509 5.81732,0.651764 1.50515,1.60987 1.75475,2.290064 1.61323,4.39626 -0.11291,1.680285 -0.45247,2.61615 -3.34603,9.222097 -4.61424,10.534201 -8.14703,18.276491 -11.30329,24.771741 -1.51417,3.11599 -2.71336,5.70511 -2.66487,5.7536 0.0485,0.0485 3.05529,-0.91213 6.68178,-2.13472 3.62649,-1.22258 14.21361,-4.78353 23.52695,-7.91321 9.31333,-3.12969 19.40747,-6.58903 22.43142,-7.68742 3.02394,-1.0984 5.89686,-2.0719 6.38426,-2.16334 1.06521,-0.19983 3.78306,0.44417 5.44786,1.29088 3.21008,1.63265 3.13699,5.10884 -0.15166,7.21257 -1.81311,1.15983 -5.63021,3.0189 -6.19851,3.0189 -0.23376,0 -1.66881,0.42275 -3.18899,0.93944 -4.44609,1.51118 -8.39065,2.43522 -11.23063,2.63086 -1.45521,0.10025 -3.59834,0.41798 -4.7625,0.70607 -2.10569,0.52108 -14.05235,4.50242 -22.88646,7.62714 -2.54661,0.90077 -7.64354,2.68961 -11.3265,3.97521 -5.45627,1.90461 -6.96457,2.54001 -8.14501,3.43124 -1.54974,1.17007 -3.79201,3.83975 -5.5641,6.6247 -0.59995,0.94287 -2.37202,3.73836 -3.93792,6.21222 -13.55315,21.41161 -28.86324,37.81158 -45.39869,48.63049 -18.1259,11.85951 -35.01886,17.97663 -49.40018,17.88833 -2.13898,-0.0131 -4.72849,-0.17637 -5.75447,-0.36275 z m 9.80292,-6.36052 c 3.76669,-0.56096 5.86318,-1.06712 9.50462,-2.29474 11.0766,-3.73419 22.82821,-10.20206 34.50722,-18.99213 11.03029,-8.30183 22.29687,-19.37141 30.67112,-30.13484 4.16643,-5.3551 10.68688,-15.41461 10.11542,-15.6057 -0.36222,-0.12112 -5.53625,1.61032 -9.45612,3.16441 -18.85067,7.47361 -46.70181,23.57997 -67.00999,38.75197 -3.73507,2.79043 -4.5758,3.55402 -5.80421,5.27167 -1.95722,2.7367 -6.20456,6.76181 -9.45632,8.96153 -2.48052,1.678 -2.75553,1.95137 -3.51496,3.49399 -1.57748,3.20433 -1.25133,5.44913 0.96854,6.66619 2.08879,1.14519 5.08168,1.37188 9.47468,0.71765 z m 81.35937,-100.72236 c 5.52331,-2.17538 15.28927,-8.73643 22.20571,-14.918427 1.68676,-1.507647 2.49756,-2.395311 2.23974,-2.452084 -0.91303,-0.201058 -5.75467,0.849201 -9.06668,1.966768 -4.08287,1.377678 -8.62989,3.586139 -12.1412,5.896906 -3.1387,2.065557 -6.70581,5.472887 -7.59266,7.252567 -1.66369,3.3386 -0.25258,4.06902 4.35509,2.25427 z m 156.34082,67.75182 c -1.31307,-0.4819 -1.69656,-2.40582 -0.69969,-3.51028 0.73942,-0.81923 0.68098,-0.79864 22.55573,-7.94642 12.46418,-4.0728 19.28255,-6.44137 22.19341,-7.70959 l 4.20175,-1.83064 -1.55591,-0.71333 c -0.88764,-0.40695 -6.10157,-1.8135 -12.13925,-3.27477 -9.73084,-2.3551 -16.0432,-3.98393 -19.68528,-5.07956 -0.84644,-0.25462 -1.77391,-0.77476 -2.27498,-1.27582 -0.97274,-0.97275 -1.58828,-2.85013 -1.07431,-3.27668 0.69439,-0.5763 2.30826,-1.07147 3.49214,-1.07147 2.05553,0 34.02284,8.295 38.40024,9.96424 0.6219,0.23715 1.4851,0.83479 1.91823,1.32809 0.67752,0.77166 0.78736,1.1081 0.78651,2.40907 -6.7e-4,1.0273 -0.16488,1.78093 -0.51213,2.35042 -0.47731,0.78279 -2.40156,2.0652 -5.28166,3.51995 -2.1486,1.08526 -38.08195,13.72344 -41.36451,14.54838 -1.78411,0.44836 -4.07727,1.04413 -5.09591,1.32394 -2.0634,0.56679 -2.85046,0.61658 -3.86438,0.24447 z M 35.718761,96.411848 c -1.67349,-0.369391 -5.959739,-1.314932 -9.525,-2.101201 C 15.133922,91.871552 6.1264182,89.514635 4.2431608,88.56702 1.1739066,87.022636 0.26459673,85.900628 0.26459673,83.657821 c 0,-2.947018 1.94159647,-4.308137 13.32408027,-9.340587 14.901756,-6.588398 29.762776,-13.340259 35.491541,-16.125 7.529591,-3.660119 9.072617,-4.15617 10.534581,-3.386652 0.829233,0.436474 0.866462,0.553563 0.71481,2.248178 -0.130165,1.454517 -0.198078,1.575848 -1.382086,2.469194 -1.618532,1.221199 -19.264402,10.16935 -25.742304,13.05382 -2.764895,1.231149 -9.015676,3.931787 -13.890624,6.001419 -5.937121,2.520572 -9.121128,4.012574 -9.6437223,4.518976 -0.4290998,0.415804 -0.7267561,0.796305 -0.6614583,0.845557 0.5175029,0.390334 9.8933556,2.682167 18.6395556,4.556252 11.571843,2.479547 13.241243,2.93862 15.05504,4.140029 1.088254,0.72083 2.275167,2.006524 2.275167,2.464521 0,0.09432 -0.766724,0.530288 -1.703831,0.968813 -2.329098,1.089916 -3.847811,1.15815 -7.556585,0.339507 z" />
            </svg>
          </Link>

          <div className="flex flex-row gap-4 h-auto flex-wrap items-center justify-center max-sm:hidden">
            {navLinks.map((link, i) => (
              <Link 
                key={link.name} 
                href={link.href} 
                ref={(e) => (footerLinksRef.current[i] = e)}
                onMouseEnter={() => handleMouseEnter(i)}
                onMouseLeave={() => handleMouseLeave(i)}
                className="relative footer-link font-montserrat font-thin text-sm text-gray hover:text-white will-change-auto transition-colors duration-700"
              >
                <span>{link.name}</span>
                <span className="footer-link_underline block absolute bottom-0 left-0 w-0 h-[0.5px] bg-white"></span>
              </Link>
            ))}
          </div>

          <div className="flex flex-row gap-4">
            {socialLinks.map((link) => (
              <Link key={link.name} href={link.href} target="_blank">
                <svg className="fill-gray hover:fill-white transition-colors duration-700 scale-125 footer-link" viewBox="0 0 576 512" width={20} height={20}>
                  {link.src}
                </svg>
              </Link>
            ))}
          </div>
        </div>

        <div className="flex justify-between items-end w-full max-sm:flex-col max-sm:items-center max-sm:gap-2">
          <p className="footer-link font-montserrat text-sm text-gray">
            &copy;2025 SGuzmanR
          </p>
          <span  className="footer-link font-montserrat text-sm text-gray">
            Todos los derechos reservados
          </span>
        </div>
      </div>
    </footer>
  )
};

export default Footer;